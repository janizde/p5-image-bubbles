{"version":3,"sources":["webpack:///bundle.0a70760a6f24f1599908.js","webpack:///./src/sketch/index.js","webpack:///./src/controls/index.js","webpack:///./src/index.js","webpack:///./src/sketch/Bubble.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","createDefaultSketch","createSketch","defaultConfig","config","SEED_COUNT","PROBABILTY_THRESHOLD","BUBBLE_DISTANCE","BUBBLE_OPACITY","IMAGE","BACKGROUND","GROWTH_RATE","s","generateBubbles","count","i","x","y","b","outer","j","Math","floor","random","width","height","sobel","sobelMap","Bubble","createVector","k","bubbles","length","hits","base","color","pixels","push","image","backgroundColor","preload","loadImage","setup","pixelDensity","createCanvas","loadPixels","backgroundMap","black","white","sobelData","_sobel2","data","slice","map","displayDensity","draw","background","ellipseMode","RADIUS","forEach","isGrowing","hitsAny","grow","mousePressed","mouseX","mouseY","Object","defineProperty","value","undefined","_sobel","_Bubble","_Bubble2","createControls","onUpdate","images","backgroundColors","settings","quicksettings","create","bindRange","bindDropDown","addButton","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_quicksettings","_quicksettings2","_sketch","_p","_p2","_sketch2","_controls","_controls2","currentSketch","p5","remove","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","pos","growthRate","this","r","other","maxDistance","dist","others","fill","noStroke","ellipse"],"mappings":"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","file":"bundle.0a70760a6f24f1599908.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultConfig = undefined;\nexports.createDefaultSketch = createDefaultSketch;\nexports.default = createSketch;\n\nvar _sobel = __webpack_require__(5);\n\nvar _sobel2 = _interopRequireDefault(_sobel);\n\nvar _Bubble = __webpack_require__(9);\n\nvar _Bubble2 = _interopRequireDefault(_Bubble);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultConfig = exports.defaultConfig = {\n  SEED_COUNT: 1000,\n  PROBABILTY_THRESHOLD: 5e-5,\n  BUBBLE_DISTANCE: 2,\n  BUBBLE_OPACITY: 255,\n  IMAGE: 'illu.jpg',\n  BACKGROUND: 'white',\n  GROWTH_RATE: 0.05\n};\n\nfunction createDefaultSketch() {\n  return createSketch(defaultConfig);\n}\n\nfunction createSketch(config) {\n  var SEED_COUNT = config.SEED_COUNT,\n      PROBABILTY_THRESHOLD = config.PROBABILTY_THRESHOLD,\n      BUBBLE_DISTANCE = config.BUBBLE_DISTANCE,\n      BUBBLE_OPACITY = config.BUBBLE_OPACITY,\n      IMAGE = config.IMAGE,\n      BACKGROUND = config.BACKGROUND,\n      GROWTH_RATE = config.GROWTH_RATE;\n\n\n  return function sketch(s) {\n    var image = void 0,\n        width = void 0,\n        height = void 0,\n        backgroundColor = void 0;\n\n    var sobelMap = [];\n    var bubbles = [];\n\n    s.preload = function () {\n      image = s.loadImage('/assets/' + IMAGE);\n    };\n\n    s.setup = function () {\n      // Set pixel density to 1, so that pixels from image are loaded in actual size\n      s.pixelDensity(1);\n\n      width = image.width;\n      height = image.height;\n      s.createCanvas(width, height);\n      s.image(image, 0, 0);\n      s.loadPixels();\n\n      var backgroundMap = {\n        black: s.color(0, 0, 0, 255),\n        white: s.color(255, 255, 255, 255)\n      };\n\n      backgroundColor = backgroundMap[BACKGROUND];\n\n      var sobelData = (0, _sobel2.default)({\n        width: width,\n        height: height,\n        data: s.pixels.slice()\n      });\n\n      for (var x = 0; x < width; ++x) {\n        for (var y = 0; y < height; ++y) {\n          sobelMap[x + y * width] = s.map(sobelData[(x + y * width) * 4], 0, 255, PROBABILTY_THRESHOLD, 1 - PROBABILTY_THRESHOLD);\n        }\n      }\n\n      // Set pixel density back to displayDensity for retina rendering\n      s.pixelDensity(s.displayDensity());\n\n      generateBubbles(SEED_COUNT);\n    };\n\n    s.draw = function () {\n      s.background(backgroundColor);\n      s.ellipseMode(s.RADIUS);\n\n      bubbles.forEach(function (b) {\n        b.draw();\n\n        if (b.isGrowing && b.hitsAny(bubbles, BUBBLE_DISTANCE)) {\n          b.isGrowing = false;\n        }\n\n        b.grow();\n      });\n\n      generateBubbles(10);\n    };\n\n    s.mousePressed = function () {\n      var x = s.mouseX;\n      var y = s.mouseY;\n\n      var base = (x + y * width) * 4;\n      var color = s.color(s.pixels[base], s.pixels[base + 1], s.pixels[base + 2], BUBBLE_OPACITY);\n\n      var b = new _Bubble2.default(s, s.createVector(x, y), color, GROWTH_RATE);\n      bubbles.push(b);\n    };\n\n    function generateBubbles(count) {\n      for (var i = 0; i < count; ++i) {\n        var x = void 0,\n            y = void 0,\n            b = void 0;\n        outer: for (var j = 0; j <= 1000; ++j) {\n          if (j === 1000) {\n            return;\n          }\n\n          x = Math.floor(s.random(width));\n          y = Math.floor(s.random(height));\n\n          var sobel = sobelMap[x + y * width];\n          if (Math.random() > sobel) {\n            continue;\n          }\n\n          b = new _Bubble2.default(s, s.createVector(x, y), null, GROWTH_RATE);\n\n          for (var k = 0; k < bubbles.length; ++k) {\n            if (bubbles[k].hits(b, BUBBLE_DISTANCE)) {\n              continue outer;\n            }\n          }\n\n          break;\n        }\n\n        var base = (x + y * width) * 4;\n        b.color = s.color(s.pixels[base], s.pixels[base + 1], s.pixels[base + 2], BUBBLE_OPACITY);\n\n        bubbles.push(b);\n        ++i;\n      }\n    }\n  };\n}\n\n/***/ }),\n/* 2 */,\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = createControls;\n\nvar _quicksettings = __webpack_require__(4);\n\nvar _quicksettings2 = _interopRequireDefault(_quicksettings);\n\nvar _sketch = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createControls(onUpdate) {\n  var config = _extends({}, _sketch.defaultConfig);\n\n  var images = ['cat.jpg', 'forest.jpg', 'illu.jpg', 'illu-2.jpg', 'illu-3.jpg', 'illu-4.jpg', 'illu-5.jpg', 'illu-6.jpg', 'marienkaefer.jpg', 'portrait.jpg', 'text.png', 'coca-cola.jpg', 'apple.jpg', 'apple-outline.png'];\n\n  var backgroundColors = ['white', 'black'];\n\n  var settings = _quicksettings2.default.create();\n  settings.bindRange(\"SEED_COUNT\", 10, 10000, _sketch.defaultConfig.SEED_COUNT, 1, config);\n  settings.bindRange(\"PROBABILTY_THRESHOLD\", 5e-5, 0.05, _sketch.defaultConfig.PROBABILTY_THRESHOLD, 1e-5, config);\n  settings.bindRange(\"BUBBLE_DISTANCE\", -50, 50, _sketch.defaultConfig.BUBBLE_DISTANCE, 1, config);\n  settings.bindRange(\"BUBBLE_OPACITY\", 0, 255, _sketch.defaultConfig.BUBBLE_OPACITY, 1, config);\n  settings.bindRange(\"GROWTH_RATE\", 0.005, 5, _sketch.defaultConfig.GROWTH_RATE, 0.01, config);\n  settings.bindDropDown(\"IMAGE\", images, config);\n  settings.bindDropDown(\"BACKGROUND\", backgroundColors, config);\n  settings.addButton(\"Apply\", function () {\n    onUpdate(_extends({}, config));\n  });\n}\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _p = __webpack_require__(0);\n\nvar _p2 = _interopRequireDefault(_p);\n\n__webpack_require__(2);\n\nvar _sketch = __webpack_require__(1);\n\nvar _sketch2 = _interopRequireDefault(_sketch);\n\nvar _controls = __webpack_require__(3);\n\nvar _controls2 = _interopRequireDefault(_controls);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar currentSketch = new _p2.default((0, _sketch.createDefaultSketch)());\n\n(0, _controls2.default)(function (config) {\n  currentSketch.remove();\n  currentSketch = new _p2.default((0, _sketch2.default)(config));\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Bubble = function () {\n  function Bubble(s, pos, color, growthRate) {\n    _classCallCheck(this, Bubble);\n\n    this.pos = pos;\n    this.r = 0;\n    this.isGrowing = true;\n    this.color = color;\n    this.s = s;\n    this.growthRate = growthRate;\n  }\n\n  _createClass(Bubble, [{\n    key: \"grow\",\n    value: function grow() {\n      if (this.isGrowing) {\n        this.r += this.growthRate;\n      }\n    }\n  }, {\n    key: \"hits\",\n    value: function hits(other) {\n      var maxDistance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      return this.pos.dist(other.pos) - maxDistance < this.r + other.r;\n    }\n  }, {\n    key: \"hitsAny\",\n    value: function hitsAny(others) {\n      var maxDistance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < others.length; ++i) {\n        if (others[i] === this) {\n          continue;\n        }\n\n        if (this.hits(others[i], maxDistance)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var s = this.s;\n      s.fill(this.color);\n      s.noStroke();\n      s.ellipse(this.pos.x, this.pos.y, this.r);\n    }\n  }]);\n\n  return Bubble;\n}();\n\nexports.default = Bubble;\n\n/***/ })\n],[8]);\n\n\n// WEBPACK FOOTER //\n// bundle.0a70760a6f24f1599908.js","import Sobel from 'sobel';\n\nimport Bubble from './Bubble';\n\nexport const defaultConfig = {\n  SEED_COUNT: 1000,\n  PROBABILTY_THRESHOLD: 5e-5,\n  BUBBLE_DISTANCE: 2,\n  BUBBLE_OPACITY: 255,\n  IMAGE: 'illu.jpg',\n  BACKGROUND: 'white',\n  GROWTH_RATE: 0.05,\n};\n\nexport function createDefaultSketch() {\n  return createSketch(defaultConfig);\n}\n\nexport default function createSketch(config) {\n  const {\n    SEED_COUNT,\n    PROBABILTY_THRESHOLD,\n    BUBBLE_DISTANCE,\n    BUBBLE_OPACITY,\n    IMAGE,\n    BACKGROUND,\n    GROWTH_RATE,\n  } = config;\n\n  return function sketch(s) {\n    let\n      image,\n      width,\n      height,\n      backgroundColor;\n\n    const sobelMap = [];\n    const bubbles = [];\n\n    s.preload = () => {\n      image = s.loadImage(`/assets/${IMAGE}`);\n    }\n\n    s.setup = () => {\n      // Set pixel density to 1, so that pixels from image are loaded in actual size\n      s.pixelDensity(1);\n\n      width = image.width;\n      height = image.height;\n      s.createCanvas(width, height);\n      s.image(image, 0, 0);\n      s.loadPixels();\n\n      const backgroundMap = {\n        black: s.color(0, 0, 0, 255),\n        white: s.color(255, 255, 255, 255),\n      };\n\n      backgroundColor = backgroundMap[BACKGROUND];\n\n      const sobelData = Sobel({\n        width,\n        height,\n        data: s.pixels.slice(),\n      });\n\n      for (let x = 0; x < width; ++x) {\n        for (let y = 0; y < height; ++y) {\n          sobelMap[x + y * width] = s.map(sobelData[(x + y * width) * 4], 0, 255, PROBABILTY_THRESHOLD, 1 - PROBABILTY_THRESHOLD);\n        }\n      }\n\n      // Set pixel density back to displayDensity for retina rendering\n      s.pixelDensity(s.displayDensity());\n\n      generateBubbles(SEED_COUNT);\n    };\n\n    s.draw = () => {\n      s.background(backgroundColor);\n      s.ellipseMode(s.RADIUS);\n\n      bubbles.forEach((b) => {\n        b.draw();\n\n        if (b.isGrowing && b.hitsAny(bubbles, BUBBLE_DISTANCE)) {\n          b.isGrowing = false;\n        }\n\n        b.grow();\n      });\n\n      generateBubbles(10);\n    };\n\n    s.mousePressed = () => {\n      const x = s.mouseX;\n      const y = s.mouseY;\n\n      const base = (x + y * width) * 4;\n      const color = s.color(\n        s.pixels[base],\n        s.pixels[base + 1],\n        s.pixels[base + 2],\n        BUBBLE_OPACITY\n      );\n\n      const b = new Bubble(s, s.createVector(x, y), color, GROWTH_RATE);\n      bubbles.push(b);\n    };\n\n    function generateBubbles(count) {\n      for (let i = 0; i < count; ++i) {\n        let x, y, b;\n        outer: for (let j = 0; j <= 1000; ++j) {\n          if (j === 1000) {\n            return;\n          }\n\n          x = Math.floor(s.random(width));\n          y = Math.floor(s.random(height));\n\n          const sobel = sobelMap[x + y * width];\n          if (Math.random() > sobel) {\n            continue;\n          }\n\n          b = new Bubble(s, s.createVector(x, y), null, GROWTH_RATE);\n\n          for (let k = 0; k < bubbles.length; ++k) {\n            if (bubbles[k].hits(b, BUBBLE_DISTANCE)) {\n              continue outer;\n            }\n          }\n\n          break;\n        }\n\n        const base = (x + y * width) * 4;\n        b.color = s.color(\n          s.pixels[base],\n          s.pixels[base + 1],\n          s.pixels[base + 2],\n          BUBBLE_OPACITY\n        );\n\n        bubbles.push(b);\n        ++i;\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sketch/index.js","import quicksettings from 'quicksettings';\n\nimport { defaultConfig } from './../sketch';\n\nexport default function createControls(onUpdate) {\n  const config = {\n    ...defaultConfig,\n  };\n\n  const images = [\n    'cat.jpg',\n    'forest.jpg',\n    'illu.jpg',\n    'illu-2.jpg',\n    'illu-3.jpg',\n    'illu-4.jpg',\n    'illu-5.jpg',\n    'illu-6.jpg',\n    'marienkaefer.jpg',\n    'portrait.jpg',\n    'text.png',\n    'coca-cola.jpg',\n    'apple.jpg',\n    'apple-outline.png',\n  ];\n\n  const backgroundColors = [\n    'white',\n    'black',\n  ];\n\n  const settings = quicksettings.create();\n  settings.bindRange(\"SEED_COUNT\", 10, 10000, defaultConfig.SEED_COUNT, 1, config);\n  settings.bindRange(\"PROBABILTY_THRESHOLD\", 5e-5, 0.05, defaultConfig.PROBABILTY_THRESHOLD, 1e-5, config);\n  settings.bindRange(\"BUBBLE_DISTANCE\", -50, 50, defaultConfig.BUBBLE_DISTANCE, 1, config);\n  settings.bindRange(\"BUBBLE_OPACITY\", 0, 255, defaultConfig.BUBBLE_OPACITY, 1, config);\n  settings.bindRange(\"GROWTH_RATE\", 0.005, 5, defaultConfig.GROWTH_RATE, 0.01, config);\n  settings.bindDropDown(\"IMAGE\", images, config);\n  settings.bindDropDown(\"BACKGROUND\", backgroundColors, config);\n  settings.addButton(\"Apply\", () => {\n    onUpdate({\n      ...config,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/index.js","import p5 from 'p5';\nimport 'p5/lib/addons/p5.dom';\n\nimport createSketch, { createDefaultSketch } from './sketch';\nimport createControls from './controls';\n\nlet currentSketch = new p5(createDefaultSketch());\n\ncreateControls(config => {\n  currentSketch.remove();\n  currentSketch = new p5(createSketch(config));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default class Bubble {\n  constructor(s, pos, color, growthRate) {\n    this.pos = pos;\n    this.r = 0;\n    this.isGrowing = true;\n    this.color = color;\n    this.s = s;\n    this.growthRate = growthRate;\n  }\n\n  grow() {\n    if (this.isGrowing) {\n      this.r += this.growthRate;\n    }\n  }\n\n  hits(other, maxDistance = 0) {\n    return this.pos.dist(other.pos) - maxDistance < this.r + other.r;\n  }\n\n  hitsAny(others, maxDistance = 0) {\n    for (let i = 0; i < others.length; ++i) {\n      if (others[i] === this) {\n        continue;\n      }\n\n      if (this.hits(others[i], maxDistance)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  draw() {\n    const s = this.s;\n    s.fill(this.color);\n    s.noStroke();\n    s.ellipse(this.pos.x, this.pos.y, this.r);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sketch/Bubble.js"],"sourceRoot":""}